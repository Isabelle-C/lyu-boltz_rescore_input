#!/bin/bash
#SBATCH --job-name=2_ampc_rescore_cofold
#SBATCH --time=09:00:00
#SBATCH --partition=hpc_l40s
#SBATCH --nodes=1
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=8
#SBATCH --gres=gpu:4
#SBATCH --mem-per-gpu=40G
#SBATCH --output=ampc_%A.out

export CUDA_VISIBLE_DEVICES=0,1,2,3
export PATH=/ru-auth/local/home/ichen/miniconda3/bin:$PATH
source activate boltz_rescore

job_names=('ZINCpx000000yskK.yaml'
 'ZINCot0000094Sbw.yaml'
 'ZINCpI000005Qhfg.yaml'
 'ZINCnz000000f6od.yaml'
 'ZINCom00000h43yc.yaml'
 'ZINCoN00000eb66T.yaml'
 'ZINCgq000000yVAh.yaml'
 'ZINCpw000006KaSB.yaml'
 'ZINCnn00000nDFvn.yaml'
 'ZINCpw000005S8oL.yaml'
 'ZINCpr000005uoSl.yaml'
 'ZINCnk00000bq2QQ.yaml'
 'ZINChk000000zZb0.yaml'
 'ZINCjw000005PC05.yaml'
 'ZINCo500000pOWFP.yaml'
 'ZINCqw000005DbkW.yaml'
 'ZINCnj00000clxUz.yaml'
 'ZINCpt000002QpkD.yaml'
 'ZINCmv000003MFuh.yaml'
 'ZINCom000009aPSZ.yaml'
 'ZINClh00000kI1by.yaml'
 'ZINChl000000Dlhx.yaml'
 'ZINCnO00000dMi90.yaml'
 'ZINCpw000005TqDY.yaml'
 'ZINCjn00000ci7wG.yaml'
 'ZINCoy000004ZMM5.yaml'
 'ZINCps00000cNOiX.yaml'
 'ZINCpc00000fKdh6.yaml'
 'ZINCpw00000g7Mjt.yaml'
 'ZINCpn00000dvpmL.yaml'
 'ZINCj500000c9WFv.yaml'
 'ZINCpr000004Px4d.yaml'
 'ZINCpc00000vt4Ux.yaml'
 'ZINCol000009L6TM.yaml'
 'ZINCoa000009eHlP.yaml'
 'ZINCpw000006LX8G.yaml'
 'ZINCne000000ZKGF.yaml'
 'ZINCja000002yaes.yaml'
 'ZINCpo00000sYyHt.yaml'
 'ZINCnI000005Jbfy.yaml'
 'ZINCmy000003N9bT.yaml'
 'ZINCqs000007GKmR.yaml'
 'ZINCo6000003lcFs.yaml'
 'ZINCpL00000ezaXQ.yaml'
 'ZINCqi00000kMc0C.yaml'
 'ZINCrj00000hmR8Q.yaml'
 'ZINCpn00000rBIWl.yaml'
 'ZINCnw000005ROKR.yaml'
 'ZINCoC000000Sffp.yaml'
 'ZINCne000000YXmT.yaml'
 'ZINCoz000005ldQ9.yaml'
 'ZINCmf000000ZVT8.yaml'
 'ZINCpc00000fK9bq.yaml'
 'ZINCpv000006K4mx.yaml'
 'ZINCpz000006Ba9N.yaml'
 'ZINCkc000004zbBf.yaml'
 'ZINCoe000009fjnX.yaml'
 'ZINCpn00000rsxqL.yaml'
 'ZINCpN00000d9rPj.yaml'
 'ZINCps00000cVaHt.yaml'
 'ZINCoA000000msx0.yaml'
 'ZINCqq000005IEHF.yaml'
 'ZINCrn00000ciwJH.yaml'
 'ZINCp500000lC512.yaml'
 'ZINCpt000003Fvtd.yaml'
 'ZINCpF000005PNxE.yaml'
 'ZINCof00000AdPps.yaml'
 'ZINCjz000003xoS3.yaml'
 'ZINCpa00000fJZg1.yaml'
 'ZINCsr000005WLAv.yaml'
 'ZINCpw000000gICd.yaml'
 'ZINCoD00000148II.yaml'
 'ZINCpi00000dsLz6.yaml'
 'ZINCqv000005D1wY.yaml'
 'ZINCox000000Q4W5.yaml'
 'ZINCoC00000518uH.yaml'
 'ZINCky000003Ch1D.yaml'
 'ZINCoh00000b5Vnx.yaml'
 'ZINCrr000008HA8V.yaml'
 'ZINCpu000007A64I.yaml'
 'ZINCnA000004SlTx.yaml'
 'ZINCoN00000e95OH.yaml'
 'ZINClt000000Oq1o.yaml'
 'ZINCoM00000e1wxE.yaml'
 'ZINCm50000071Kr3.yaml'
 'ZINCoa00000u1CDP.yaml'
 'ZINCrx000008f5PV.yaml'
 'ZINCpx000000BF0N.yaml'
 'ZINCpy0000012URA.yaml'
 'ZINCq700000pNyWi.yaml'
 'ZINCmd00000772Uc.yaml'
 'ZINCsx000005ZV2b.yaml'
 'ZINCof000009jV0j.yaml'
 'ZINCpG000000O9OB.yaml'
 'ZINCgj000000VSmS.yaml'
 'ZINCnf0000017CKs.yaml'
 'ZINCrk00000hk85j.yaml'
 'ZINCrq000008FfLZ.yaml'
 'ZINCr800000ge6Es.yaml'
 'ZINCqp000001wOo4.yaml'
 'ZINCno00000brkNZ.yaml'
 'ZINCnj00000bkDkj.yaml'
 'ZINCkj000005fICk.yaml'
 'ZINCpz000006Bchs.yaml'
 'ZINCno00000ogQJN.yaml'
 'ZINClx000001Emar.yaml'
 'ZINCp900000rF05s.yaml'
 'ZINCo500000pranG.yaml'
 'ZINCj8000002qxVK.yaml'
 'ZINCoC000009DrFk.yaml'
 'ZINCor000000bYQC.yaml'
 'ZINCn500000e6Ctx.yaml'
 'ZINCoy000004ZMzS.yaml'
 'ZINCka00000dtzud.yaml'
 'ZINCov000006qjGm.yaml'
 'ZINCoh00000aycmV.yaml'
 'ZINCkn00000dKR9t.yaml'
 'ZINCpx000000wbr7.yaml'
 'ZINCox000000QL1C.yaml'
 'ZINCnw00000an5Mi.yaml'
 'ZINCqv000000dDhE.yaml'
 'ZINCpy000007mRzq.yaml'
 'ZINCps00000cCQzL.yaml'
 'ZINCnA000006CqwN.yaml'
 'ZINCnN00000dIJkh.yaml'
 'ZINCqd00000fFoQj.yaml'
 'ZINCsy000005TX8g.yaml'
 'ZINCqp00000kNF6Y.yaml'
 'ZINCoB00000415oH.yaml'
 'ZINCih00000cgtvX.yaml'
 'ZINCpa00000t06qm.yaml'
 'ZINCor0000004EQA.yaml'
 'ZINCkp00000czL1M.yaml'
 'ZINCor000000amXW.yaml'
 'ZINCql00000kMNvJ.yaml'
 'ZINCnD000007yffK.yaml'
 'ZINCno00000olAyM.yaml'
 'ZINCsv0000066w78.yaml'
 'ZINCo9000009eBeW.yaml'
 'ZINCpo00000u1yY8.yaml'
 'ZINCpC00000cUVTs.yaml'
 'ZINCns000005QGu8.yaml'
 'ZINCpx000006Mggw.yaml'
 'ZINCni000001oBLT.yaml'
 'ZINCpo00000u87Qh.yaml'
 'ZINCq500000k3EKH.yaml'
 'ZINCrw000008x2B6.yaml'
 'ZINCpE000000gdUH.yaml'
 'ZINCoB0000041658.yaml'
 'ZINCnD000004R0QJ.yaml'
 'ZINCqu000005JLCu.yaml'
 'ZINCnA000006ySao.yaml'
 'ZINCou0000008Y4h.yaml'
 'ZINCpC000006DVNJ.yaml'
 'ZINCoB0000041Dun.yaml'
 'ZINCpv0000009ARJ.yaml'
 'ZINCoa000000xsrv.yaml'
 'ZINCnt000005TKnf.yaml'
 'ZINCp400000n8f27.yaml'
 'ZINCju000004n3UE.yaml'
 'ZINCpx000000F45p.yaml'
 'ZINCq800000ckcbj.yaml'
 'ZINCne0000010wLt.yaml'
 'ZINCsE000004DFzn.yaml'
 'ZINCmq000004Cmkn.yaml'
 'ZINCoG000003dDNY.yaml'
 'ZINCpH000009MPuP.yaml'
 'ZINCm6000003jMfh.yaml'
 'ZINCpD000001ReTr.yaml'
 'ZINCpw000005Sgeq.yaml'
 'ZINCnq000000gSpS.yaml'
 'ZINCoq000004ACfg.yaml'
 'ZINCqm00000kMWN5.yaml'
 'ZINCo500000p4V4A.yaml'
 'ZINCpy0000063Osg.yaml'
 'ZINCsv0000066WIy.yaml'
 'ZINClF000003dH7O.yaml'
 'ZINCpH000006mtN0.yaml'
 'ZINCp500000lj8px.yaml'
 'ZINCnl000001Wh54.yaml'
 'ZINCrl00000hkmH7.yaml'
 'ZINCpI000006terX.yaml'
 'ZINCpw000006LSxq.yaml'
 'ZINClr000000mkMW.yaml'
 'ZINCsr000005Y89F.yaml'
 'ZINClh00000jqqG6.yaml'
 'ZINCqD00000aji9o.yaml'
 'ZINCod00000weRZd.yaml'
 'ZINCn8000000qF0X.yaml'
 'ZINCpw000005QPOR.yaml'
 'ZINCoy000004ZJPz.yaml'
 'ZINCpP00000bU7xm.yaml'
 'ZINCrs000004okat.yaml'
 'ZINClo00000ks46n.yaml'
 'ZINCrv000008weOQ.yaml'
 'ZINCoN00000cVylH.yaml'
 'ZINCpx000006KC5w.yaml'
 'ZINCo900000teVTb.yaml'
 'ZINCqy000005qrxA.yaml'
 'ZINCoi0000096S6A.yaml'
 'ZINCpC000001xFSd.yaml'
 'ZINCqj00000kMmjp.yaml'
 'ZINCoG000005qfBv.yaml'
 'ZINCtA000007wIuA.yaml'
 'ZINCoy0000000jHp.yaml'
 'ZINCnw00000263Tq.yaml'
 'ZINCrx000008giEx.yaml'
 'ZINCnF000007YVNA.yaml'
 'ZINCo500000ncZo0.yaml'
 'ZINCtB000007k84R.yaml'
 'ZINCou000005M8el.yaml'
 'ZINCr600000ge0zX.yaml'
 'ZINCsi00000kM9Xk.yaml'
 'ZINCoA000004YwqJ.yaml'
 'ZINCqd00000gaEpZ.yaml'
 'ZINCou000005LBQ1.yaml'
 'ZINCpH000006otwK.yaml'
 'ZINCpj00000e7TxA.yaml'
 'ZINCnG0000081XBn.yaml'
 'ZINCpu000003GY8d.yaml'
 'ZINCoB000003U6KG.yaml'
 'ZINCne0000010wLZ.yaml'
 'ZINCpD000007hlRR.yaml'
 'ZINCpE000006514M.yaml'
 'ZINCov000000fVPn.yaml'
 'ZINCq500000jP9yN.yaml'
 'ZINCpx000000t7yB.yaml'
 'ZINCpH000005RQLG.yaml'
 'ZINCnx000002sSpP.yaml'
 'ZINCpe00000xRwKP.yaml'
 'ZINCtu000000iQyM.yaml'
 'ZINCpw000006KgXH.yaml'
 'ZINCox000000PgIY.yaml'
 'ZINCpG00000104Hn.yaml'
 'ZINCqp000001zOGK.yaml'
 'ZINCpw000000jsg7.yaml'
 'ZINCns000000Fwfj.yaml'
 'ZINCnw000001RvkZ.yaml'
 'ZINCnr000007QsGS.yaml'
 'ZINCox000000FTXn.yaml'
 'ZINCsr000005WKcm.yaml'
 'ZINCpu000003FDNv.yaml'
 'ZINCnj00000bkDy2.yaml'
 'ZINCoD000004ZfbF.yaml'
 'ZINCrx000008eWH9.yaml'
 'ZINCpt000003G4Gq.yaml'
 'ZINCsv0000067Cct.yaml'
 'ZINCqp00000kTyy8.yaml'
 'ZINCne00000bjzzQ.yaml'
 'ZINCpa00000sfxCI.yaml'
 'ZINCpj00000iwJW3.yaml'
 'ZINCpr00000aoHb1.yaml'
 'ZINCox000000BUpb.yaml'
 'ZINCov000004qFHg.yaml'
 'ZINCnD000004R3si.yaml'
 'ZINCpu000002Sn8W.yaml'
 'ZINCtw000007SRse.yaml'
 'ZINCtA000007wIuq.yaml'
 'ZINCqC00000ajoRK.yaml'
 'ZINCoA0000088IoR.yaml'
 'ZINCpy000006MV1f.yaml'
 'ZINCpd00000fRHhJ.yaml'
 'ZINCoo00000jBfqK.yaml'
 'ZINCoF000002XFGx.yaml'
 'ZINCos000004zTlG.yaml'
 'ZINCny000005Si3m.yaml'
 'ZINCkD000003h2L2.yaml'
 'ZINCo500000mWk4X.yaml'
 'ZINCst0000066lc0.yaml'
 'ZINCp700000gEpkL.yaml'
 'ZINCpx000000v48R.yaml'
 'ZINCpy000006KWUD.yaml'
 'ZINCqq000005JqLR.yaml'
 'ZINCju000004lYU4.yaml'
 'ZINCrn00000cizoo.yaml'
 'ZINCsv0000066zfl.yaml'
 'ZINCkj00000hd1Lu.yaml'
 'ZINCl500000hT71S.yaml'
 'ZINCl900000cl7DG.yaml'
 'ZINCpC00000cTAdI.yaml'
 'ZINCpJ000005QrV7.yaml'
 'ZINCjp00000cifnT.yaml'
 'ZINCpz000006CDhl.yaml'
 'ZINCnz000000fEnH.yaml'
 'ZINCnE000004t8XH.yaml'
 'ZINCo800000sSnJT.yaml'
 'ZINCrm00000hqn9z.yaml'
 'ZINCpE000000npYd.yaml'
 'ZINCoE000004BQvV.yaml'
 'ZINCjG00000477fP.yaml'
 'ZINCot000004Aibf.yaml'
 'ZINCon0000097YAg.yaml'
 'ZINCoJ000006ulX9.yaml'
 'ZINCgo000001oBbm.yaml'
 'ZINCoG000003Rdm0.yaml'
 'ZINCpC000007e8Q5.yaml'
 'ZINCoF000003NqKt.yaml'
 'ZINCrl00000hkmbb.yaml'
 'ZINCno00000cA1Iu.yaml'
 'ZINCnA000000nzsj.yaml'
 'ZINCrt000008FSLK.yaml'
 'ZINCpG000000UygT.yaml'
 'ZINCpt0000007cWQ.yaml'
 'ZINCpy000000YD5b.yaml')

# Build the tasks array
tasks=()
for JOB_NAME in "${job_names[@]}"; do
  tasks+=("boltz rescore /lustre/fs6/lyu_lab/scratch/ichen/data/boltz_runs/ampc_rescore_cofold_config/${JOB_NAME} --out_dir /lustre/fs6/lyu_lab/scratch/ichen/data/boltz_runs/ampc_rescore_cofold_processed/$(basename $JOB_NAME .yaml) --use_msa_server")
done

printf "%s\n" "${tasks[@]}" | parallel -j $SLURM_CPUS_PER_TASK

#!/bin/bash
#SBATCH --job-name=3_ampc_rescore_cofold
#SBATCH --time=09:00:00
#SBATCH --partition=hpc_l40s
#SBATCH --nodes=1
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=8
#SBATCH --gres=gpu:4
#SBATCH --mem-per-gpu=40G
#SBATCH --output=ampc_%A.out

export CUDA_VISIBLE_DEVICES=0,1,2,3
export PATH=/ru-auth/local/home/ichen/miniconda3/bin:$PATH
source activate boltz_rescore

job_names=('ZINCow000000z8M6.yaml'
 'ZINCop00000khRDI.yaml'
 'ZINCpu000000n2Cu.yaml'
 'ZINCo600000rbS8H.yaml'
 'ZINClD000002ZnD1.yaml'
 'ZINCnC000005ldt7.yaml'
 'ZINCjs000005H1Qr.yaml'
 'ZINCqf00000aMrqW.yaml'
 'ZINCoB000003Ub0h.yaml'
 'ZINCoG000003x7b9.yaml'
 'ZINCoA000008cpEs.yaml'
 'ZINCnA000000l2wK.yaml'
 'ZINClF000003eRZs.yaml'
 'ZINCox000004zWsX.yaml'
 'ZINCpt000002KQKA.yaml'
 'ZINCom00000h2TSL.yaml'
 'ZINCmn00000dyICZ.yaml'
 'ZINCpC000007ewsl.yaml'
 'ZINCom0000097L68.yaml'
 'ZINCos000008UIyV.yaml'
 'ZINCms000000Cwy0.yaml'
 'ZINCpF000005PJ3b.yaml'
 'ZINCkn000005TFB9.yaml'
 'ZINCpq000008hd65.yaml'
 'ZINCoB0000041653.yaml'
 'ZINCop000009c7x2.yaml'
 'ZINCnz000000eJYh.yaml'
 'ZINCog00000zltpn.yaml'
 'ZINCpu000002QTDw.yaml'
 'ZINCpe00000z8vOu.yaml'
 'ZINCp500000lrVZZ.yaml'
 'ZINCpB000006DCGq.yaml'
 'ZINCsx000005ZSyQ.yaml'
 'ZINCik00000f4Ip3.yaml'
 'ZINCq500000cnVa8.yaml'
 'ZINCoI000003yN3c.yaml'
 'ZINCpw000006KllW.yaml'
 'ZINCqE000004Yf97.yaml'
 'ZINCpn00000qUzBP.yaml'
 'ZINCrt000008FPbl.yaml'
 'ZINCpu000003FNfB.yaml'
 'ZINCoE000003KQjR.yaml'
 'ZINCpu000007I2En.yaml'
 'ZINCmG000000oROD.yaml'
 'ZINCpE000005QY9O.yaml'
 'ZINCnz000004QoAr.yaml'
 'ZINCl800000ccI8p.yaml'
 'ZINCh800000c7GkA.yaml'
 'ZINCrD000006I8bW.yaml'
 'ZINCjj00000dgEfv.yaml'
 'ZINClj00000celJG.yaml'
 'ZINCpx000006MJ3Q.yaml'
 'ZINCqk00000kMAJ4.yaml'
 'ZINCkp00000hFxow.yaml'
 'ZINCpw000000q1ZR.yaml'
 'ZINCps000005v2GC.yaml'
 'ZINCow000000u0Gs.yaml'
 'ZINCpg00000DaEq6.yaml'
 'ZINClx000001K7k7.yaml'
 'ZINCo9000009eBwh.yaml'
 'ZINCo5000009gYOm.yaml'
 'ZINCnw00000290xU.yaml'
 'ZINCo9000000v2k6.yaml'
 'ZINCkh0000053Iot.yaml'
 'ZINCoq000005GjRT.yaml'
 'ZINClx000001BJEZ.yaml'
 'ZINCok00000eAexH.yaml'
 'ZINCkv000003cf0t.yaml'
 'ZINCq900000d60NH.yaml'
 'ZINCoE000003wOkf.yaml'
 'ZINCsu000006aRBT.yaml'
 'ZINCok0000097g2u.yaml'
 'ZINCpK0000061mQW.yaml'
 'ZINCow0000047QMe.yaml'
 'ZINCor000004Bikb.yaml'
 'ZINCl500000i1QMY.yaml'
 'ZINCmn00000758n1.yaml'
 'ZINCqu000005I6wP.yaml'
 'ZINCps000004SQfZ.yaml'
 'ZINCpD000001RrZj.yaml'
 'ZINCoH000003yw57.yaml'
 'ZINCpq000005sK4Y.yaml'
 'ZINCmu000005O1pJ.yaml'
 'ZINCpt000002LRbs.yaml'
 'ZINCpz000006XWGo.yaml'
 'ZINCnc000000NBXM.yaml'
 'ZINCru000008H2wf.yaml'
 'ZINCru000008FijA.yaml'
 'ZINCpr000005t9WI.yaml'
 'ZINCpz000006CFfW.yaml'
 'ZINCqs000002TbmO.yaml'
 'ZINCpb00000fK5IH.yaml'
 'ZINCov000004qlw6.yaml'
 'ZINCoJ000006oXrc.yaml'
 'ZINCpq0000081DY4.yaml'
 'ZINCpE0000069uQM.yaml'
 'ZINCpg00000CpC6V.yaml'
 'ZINCoC000000RvSv.yaml'
 'ZINCrm00000hktCg.yaml'
 'ZINCmu000005KElS.yaml'
 'ZINCqd00000ghpok.yaml'
 'ZINCrs000004oocF.yaml'
 'ZINCky000004t6c3.yaml'
 'ZINCox000000Kq19.yaml'
 'ZINCpE0000069rny.yaml'
 'ZINCoh0000096DXy.yaml'
 'ZINCpN00000bTYdg.yaml'
 'ZINCoy0000003AQO.yaml'
 'ZINCkr000000jEQB.yaml'
 'ZINCtC0000076i0m.yaml'
 'ZINCpv000005Llm7.yaml'
 'ZINCoo0000098f2Y.yaml'
 'ZINCoE000004ySZf.yaml'
 'ZINCo4000009eeyf.yaml'
 'ZINCoA000008cPOJ.yaml'
 'ZINCrb00000geggE.yaml'
 'ZINCp500000iKDa0.yaml'
 'ZINCnk00000lzzM3.yaml'
 'ZINCnq000005Qj6N.yaml'
 'ZINCpv000006JYBB.yaml'
 'ZINCl500000dRziW.yaml'
 'ZINCnB000006HzIP.yaml'
 'ZINCou0000008low.yaml'
 'ZINCqn00000kRFHK.yaml'
 'ZINCl500000dQ66R.yaml'
 'ZINCpJ000005Qtv7.yaml'
 'ZINCob00000uYO5w.yaml'
 'ZINCop00000kUBDk.yaml'
 'ZINCri00000hjVE1.yaml'
 'ZINCpD000001Jkzn.yaml'
 'ZINCnB000000LLkh.yaml'
 'ZINCpj00000hEKoe.yaml'
 'ZINCna00000gcU24.yaml'
 'ZINCnl00000mm7yL.yaml'
 'ZINCpN00000dbQiG.yaml'
 'ZINCor000004zMXF.yaml'
 'ZINCou0000048vLf.yaml'
 'ZINCny00000bsS4a.yaml'
 'ZINCnF000002cqpW.yaml'
 'ZINCqw000005DiWU.yaml'
 'ZINCji0000035VJs.yaml'
 'ZINCnD000001AiPO.yaml'
 'ZINClw000001oAkq.yaml'
 'ZINCnf0000013lID.yaml'
 'ZINCnq000000glAh.yaml'
 'ZINCpE000006OLxy.yaml'
 'ZINCqz0000079KN0.yaml'
 'ZINCow000007Q5ru.yaml'
 'ZINCor0000003qxb.yaml'
 'ZINCo700000se6WG.yaml'
 'ZINCkG000002xhjY.yaml'
 'ZINCmk000001Eksf.yaml'
 'ZINCpw00000bgr5H.yaml'
 'ZINCtC0000074NJi.yaml'
 'ZINCpy000006N1yY.yaml'
 'ZINCpe00000fSv0N.yaml'
 'ZINCsj00000iL0Qi.yaml'
 'ZINCsr000005WTXG.yaml'
 'ZINCsr000005YipU.yaml'
 'ZINCoC000000Odoq.yaml'
 'ZINCoi00000cks6g.yaml'
 'ZINCjl00000dje4J.yaml'
 'ZINCpw000000qRhw.yaml'
 'ZINCsE000004EIRj.yaml'
 'ZINCm6000009lCy1.yaml'
 'ZINCow000000vdZo.yaml'
 'ZINCpu000003FHHc.yaml'
 'ZINClf00000cdzMc.yaml'
 'ZINCoC000005B2jS.yaml'
 'ZINCrr000008Fpb5.yaml'
 'ZINCnC000001h6mY.yaml'
 'ZINCpr000004MLs2.yaml'
 'ZINCp500000lj8LQ.yaml'
 'ZINCnt000000Vrkk.yaml'
 'ZINCqp000001H4wk.yaml'
 'ZINCmu000001aNIo.yaml'
 'ZINCog000009fCeN.yaml'
 'ZINCpo00000emrYa.yaml'
 'ZINCpn00000rQsjF.yaml'
 'ZINCpc00000fKdhb.yaml'
 'ZINCnA000004SuN0.yaml'
 'ZINCoA000003FKFb.yaml'
 'ZINCnu000006sT8C.yaml'
 'ZINCnr000007ZKYn.yaml'
 'ZINCpl00000dupWa.yaml'
 'ZINCl800000dTyeU.yaml'
 'ZINCql00000kQpj5.yaml'
 'ZINCp500000hDtAQ.yaml'
 'ZINCpC00000c6mhb.yaml'
 'ZINCpF000005PJc1.yaml'
 'ZINCpe00000zs66F.yaml'
 'ZINCpd00000fKnvr.yaml'
 'ZINCoG000005ABPc.yaml'
 'ZINCon00000986RR.yaml'
 'ZINClK000003V7n3.yaml'
 'ZINCpn00000dvnu4.yaml'
 'ZINCsf00000kGfCL.yaml'
 'ZINCm5000008WkTd.yaml'
 'ZINCqy000005oN0p.yaml'
 'ZINCmk0000078sKw.yaml'
 'ZINCpx000000EAY5.yaml'
 'ZINCro00000ciKlx.yaml'
 'ZINCol000009aqMD.yaml'
 'ZINCpt000002OCyN.yaml'
 'ZINCpx000006MdZ7.yaml'
 'ZINCnt0000093Co4.yaml'
 'ZINCnu000001uGVF.yaml'
 'ZINCie000009alAg.yaml'
 'ZINCpt000003G7KW.yaml'
 'ZINCsp00000gmtvq.yaml'
 'ZINCoF000005b4p4.yaml'
 'ZINCp500000lse2Y.yaml'
 'ZINCon000009bg8J.yaml'
 'ZINCot000000uyTv.yaml'
 'ZINCpr000005t9wA.yaml'
 'ZINCpD000007jr7l.yaml'
 'ZINCno00000czqrw.yaml'
 'ZINCsv0000066w6Z.yaml'
 'ZINCpw0000078zSl.yaml'
 'ZINCrp00000cliuG.yaml'
 'ZINCom00000h0svX.yaml'
 'ZINCo9000009eD1K.yaml'
 'ZINCnw0000024c8Q.yaml'
 'ZINCoA000000s0wn.yaml'
 'ZINCpp00000dsr6s.yaml'
 'ZINCkj000005eDNW.yaml'
 'ZINCtA000007vdnV.yaml'
 'ZINCpu000003FK3u.yaml'
 'ZINCsx0000061cOr.yaml'
 'ZINCnz000000jr9z.yaml'
 'ZINCpw000000hOfK.yaml'
 'ZINCqp000001tfWw.yaml'
 'ZINCpx000006KH3v.yaml'
 'ZINCpv000005JXnh.yaml'
 'ZINCnK000008AYQq.yaml'
 'ZINCoE000002Rzx7.yaml'
 'ZINCqi00000kMhnx.yaml'
 'ZINCrp00000ciW18.yaml'
 'ZINCno00000ojS2B.yaml'
 'ZINCqr000000dZuH.yaml'
 'ZINCp400000mlgLp.yaml'
 'ZINCqo00000kSsVi.yaml'
 'ZINCpt000002NChY.yaml'
 'ZINCpv000006JYWn.yaml'
 'ZINCpo00000dvZio.yaml'
 'ZINCoe00000x1TC0.yaml'
 'ZINCnp00000oXF3Z.yaml'
 'ZINCsn00000gjZPQ.yaml'
 'ZINCiJ000002qp2u.yaml'
 'ZINCqk00000kMBFP.yaml'
 'ZINCoA000000wCUO.yaml'
 'ZINCst0000066rEV.yaml'
 'ZINCq800000qbOLI.yaml'
 'ZINCrt000008EZAy.yaml'
 'ZINCpJ0000025mfA.yaml'
 'ZINCoA000000oF5w.yaml'
 'ZINCpA000006Dcn3.yaml'
 'ZINCpz000008YHff.yaml'
 'ZINCmG000003hBnb.yaml'
 'ZINCjl00000chTUi.yaml'
 'ZINCmc000000I3fu.yaml'
 'ZINCnu000001u1s8.yaml'
 'ZINCnt000001aZii.yaml'
 'ZINCos000008dgLu.yaml'
 'ZINCrs000004pxiP.yaml'
 'ZINCnn00000cvjH6.yaml'
 'ZINCpy0000012c15.yaml'
 'ZINCph00000Ex4VT.yaml'
 'ZINCpg00000D5L8V.yaml'
 'ZINCos000000faan.yaml'
 'ZINCny00000brM2G.yaml'
 'ZINCps000005ts9l.yaml'
 'ZINCns000000ROJ6.yaml'
 'ZINCou000005M3al.yaml'
 'ZINCnF000007NEIX.yaml'
 'ZINCnD000001zqOW.yaml'
 'ZINCi6000000ZYOY.yaml'
 'ZINCnA000000y1xj.yaml'
 'ZINCoE000003wOdW.yaml'
 'ZINCnH000008i1Bw.yaml'
 'ZINCnC000007hEMI.yaml'
 'ZINCoq000006nIMj.yaml'
 'ZINChi000000vFrI.yaml'
 'ZINCow0000049jNO.yaml'
 'ZINCoE000002RZEl.yaml'
 'ZINCn900000c3g8B.yaml'
 'ZINCo500000pOVqj.yaml'
 'ZINCpx000000In4K.yaml'
 'ZINCoD000001cXeD.yaml'
 'ZINCpH000006oyJi.yaml'
 'ZINCjs000004lPN2.yaml'
 'ZINCpL00000d4pz5.yaml'
 'ZINCt500000rKAsE.yaml'
 'ZINCob000000Fu00.yaml'
 'ZINCpH000001qRYF.yaml'
 'ZINCoF000003y7VF.yaml'
 'ZINCnt000001b7Cw.yaml'
 'ZINCmq000004LL0a.yaml'
 'ZINCqf000005O4Br.yaml'
 'ZINCos000004zX9f.yaml'
 'ZINCtD000006Leo8.yaml'
 'ZINCpw000005Sgrj.yaml'
 'ZINCpG0000014tEW.yaml'
 'ZINCrt000008EZHo.yaml')

# Build the tasks array
tasks=()
for JOB_NAME in "${job_names[@]}"; do
  tasks+=("boltz rescore /lustre/fs6/lyu_lab/scratch/ichen/data/boltz_runs/ampc_rescore_cofold_config/${JOB_NAME} --out_dir /lustre/fs6/lyu_lab/scratch/ichen/data/boltz_runs/ampc_rescore_cofold_processed/$(basename $JOB_NAME .yaml) --use_msa_server")
done

printf "%s\n" "${tasks[@]}" | parallel -j $SLURM_CPUS_PER_TASK

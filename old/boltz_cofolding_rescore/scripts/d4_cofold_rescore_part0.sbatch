#!/bin/bash
#SBATCH --job-name=0_d4_rescore_cofold
#SBATCH --time=02:00:00
#SBATCH --partition=hpc_l40s
#SBATCH --nodes=1
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=8
#SBATCH --gres=gpu:4
#SBATCH --mem-per-gpu=40G
#SBATCH --output=d4_%A.out

export CUDA_VISIBLE_DEVICES=0,1,2,3
export PATH=/ru-auth/local/home/ichen/miniconda3/bin:$PATH
source activate boltz_rescore

job_names=('ZINC000639049217.yaml'
 'ZINC000624097807.yaml'
 'ZINC000355023141.yaml'
 'ZINC000338210230.yaml'
 'ZINC000635912552.yaml'
 'ZINC000449156693.yaml'
 'ZINC000639585864.yaml'
 'ZINC000362430581.yaml'
 'ZINC000495211316.yaml'
 'ZINC000413345277.yaml'
 'ZINC000362128724.yaml'
 'ZINC000375299581.yaml'
 'ZINC000348588772.yaml'
 'ZINC000352657646.yaml'
 'ZINC000377628890.yaml'
 'ZINC000179028195.yaml'
 'ZINC000631091675.yaml'
 'ZINC000665695037.yaml'
 'ZINC000615622500.yaml'
 'ZINC000345928153.yaml'
 'ZINC000451479054.yaml'
 'ZINC000341983064.yaml'
 'ZINC000301254546.yaml'
 'ZINC000437567142.yaml'
 'ZINC000345017701.yaml'
 'ZINC000428731910.yaml'
 'ZINC000614859831.yaml'
 'ZINC000368074394.yaml'
 'ZINC000289915250.yaml'
 'ZINC000068812227.yaml'
 'ZINC000431415543.yaml'
 'ZINC000632070629.yaml'
 'ZINC000653059646.yaml'
 'ZINC000377646411.yaml'
 'ZINC000154146881.yaml'
 'ZINC000624061454.yaml'
 'ZINC000641276655.yaml'
 'ZINC000449583914.yaml'
 'ZINC000631235817.yaml'
 'ZINC000488230856.yaml'
 'ZINC000191219561.yaml'
 'ZINC000563099383.yaml'
 'ZINC000251658325.yaml'
 'ZINC000631979398.yaml'
 'ZINC000657300720.yaml'
 'ZINC000657699696.yaml'
 'ZINC000298433681.yaml'
 'ZINC000344040091.yaml'
 'ZINC000265738616.yaml'
 'ZINC000367889194.yaml'
 'ZINC000114729400.yaml'
 'ZINC000423276506.yaml'
 'ZINC000567487612.yaml'
 'ZINC000418270293.yaml'
 'ZINC000128122168.yaml'
 'ZINC000567992445.yaml'
 'ZINC000162847633.yaml'
 'ZINC000488256763.yaml'
 'ZINC000261774985.yaml'
 'ZINC000065939558.yaml'
 'ZINC000561696674.yaml'
 'ZINC000335925353.yaml'
 'ZINC000412996356.yaml'
 'ZINC000328820289.yaml'
 'ZINC000569686370.yaml'
 'ZINC000546930762.yaml'
 'ZINC000681711644.yaml'
 'ZINC000442838678.yaml'
 'ZINC000584683200.yaml'
 'ZINC000488122558.yaml'
 'ZINC000331207634.yaml'
 'ZINC000277343296.yaml'
 'ZINC000640099740.yaml'
 'ZINC000638189401.yaml'
 'ZINC000467716766.yaml'
 'ZINC000271618372.yaml'
 'ZINC000363377421.yaml'
 'ZINC000497236705.yaml'
 'ZINC000544927312.yaml'
 'ZINC000195335838.yaml'
 'ZINC000624261462.yaml'
 'ZINC000329738594.yaml'
 'ZINC000302129330.yaml'
 'ZINC000329362699.yaml'
 'ZINC000246954730.yaml'
 'ZINC000657498570.yaml'
 'ZINC000638645623.yaml'
 'ZINC000135482689.yaml'
 'ZINC000304063884.yaml'
 'ZINC000269099581.yaml'
 'ZINC000092642352.yaml'
 'ZINC000358789280.yaml'
 'ZINC000369205980.yaml'
 'ZINC000609540377.yaml'
 'ZINC000566689089.yaml'
 'ZINC000367129355.yaml'
 'ZINC000616783624.yaml'
 'ZINC000547642529.yaml'
 'ZINC000341120539.yaml'
 'ZINC000067715288.yaml'
 'ZINC000343185691.yaml'
 'ZINC000488408504.yaml'
 'ZINC000591068587.yaml'
 'ZINC000332615244.yaml'
 'ZINC000080960073.yaml'
 'ZINC000407322128.yaml'
 'ZINC000527688598.yaml'
 'ZINC000029620765.yaml'
 'ZINC000664448457.yaml'
 'ZINC000543431292.yaml'
 'ZINC000026473483.yaml'
 'ZINC000451439685.yaml'
 'ZINC000366646246.yaml'
 'ZINC000353089187.yaml'
 'ZINC000194813541.yaml'
 'ZINC000544192609.yaml'
 'ZINC000151228439.yaml'
 'ZINC000340055039.yaml'
 'ZINC000437075156.yaml'
 'ZINC000288401156.yaml'
 'ZINC000563406324.yaml'
 'ZINC000267294321.yaml'
 'ZINC000452104081.yaml'
 'ZINC000643339461.yaml'
 'ZINC000630510987.yaml'
 'ZINC000080960915.yaml'
 'ZINC000349908169.yaml'
 'ZINC000518842964.yaml'
 'ZINC000663449223.yaml'
 'ZINC000126435005.yaml'
 'ZINC000342540996.yaml'
 'ZINC000609076791.yaml'
 'ZINC000634050549.yaml'
 'ZINC000109059752.yaml'
 'ZINC000158996642.yaml'
 'ZINC000356040370.yaml'
 'ZINC000554523385.yaml'
 'ZINC000275789317.yaml'
 'ZINC000561217259.yaml'
 'ZINC000619010813.yaml'
 'ZINC000371594592.yaml'
 'ZINC000378200657.yaml'
 'ZINC000271789537.yaml'
 'ZINC000056767086.yaml'
 'ZINC000440899623.yaml'
 'ZINC000559417747.yaml'
 'ZINC000329284591.yaml'
 'ZINC000548008896.yaml'
 'ZINC000301675210.yaml'
 'ZINC000372295546.yaml'
 'ZINC000270269326.yaml'
 'ZINC000569143155.yaml'
 'ZINC000367970677.yaml'
 'ZINC000258864497.yaml'
 'ZINC000364803807.yaml'
 'ZINC000562352532.yaml'
 'ZINC000451895384.yaml'
 'ZINC000176752603.yaml'
 'ZINC000564047596.yaml'
 'ZINC000127166269.yaml'
 'ZINC000293604393.yaml'
 'ZINC000450226409.yaml'
 'ZINC000662049949.yaml'
 'ZINC000331412478.yaml'
 'ZINC000290098055.yaml'
 'ZINC000308370895.yaml'
 'ZINC000420401643.yaml'
 'ZINC000345765694.yaml'
 'ZINC000298424869.yaml'
 'ZINC000525237972.yaml'
 'ZINC000343213239.yaml'
 'ZINC000573862850.yaml'
 'ZINC000487844530.yaml'
 'ZINC000064657791.yaml'
 'ZINC000294513981.yaml'
 'ZINC000337655505.yaml'
 'ZINC000269834111.yaml'
 'ZINC000566176942.yaml'
 'ZINC000301077012.yaml'
 'ZINC000487051932.yaml'
 'ZINC000662805644.yaml'
 'ZINC000333727893.yaml'
 'ZINC000614852669.yaml'
 'ZINC000602819835.yaml'
 'ZINC000279624908.yaml'
 'ZINC000358506216.yaml'
 'ZINC000450352542.yaml'
 'ZINC000562747285.yaml'
 'ZINC000423069736.yaml'
 'ZINC000622075832.yaml'
 'ZINC000443500799.yaml'
 'ZINC000266211012.yaml'
 'ZINC000012721827.yaml'
 'ZINC000581277232.yaml'
 'ZINC000648691433.yaml'
 'ZINC000464682470.yaml'
 'ZINC000459762949.yaml'
 'ZINC000339591161.yaml'
 'ZINC000613759362.yaml'
 'ZINC000566614319.yaml'
 'ZINC000363554822.yaml'
 'ZINC000568745637.yaml'
 'ZINC000335841258.yaml'
 'ZINC000651692099.yaml'
 'ZINC000373387982.yaml'
 'ZINC000662137220.yaml'
 'ZINC000369237090.yaml'
 'ZINC000664868499.yaml'
 'ZINC000418149855.yaml'
 'ZINC000479933259.yaml'
 'ZINC000495880797.yaml'
 'ZINC000328920464.yaml'
 'ZINC000516013415.yaml'
 'ZINC000594481260.yaml'
 'ZINC000262089856.yaml'
 'ZINC000367568545.yaml'
 'ZINC000413570733.yaml'
 'ZINC000644245640.yaml'
 'ZINC000547111210.yaml'
 'ZINC000620168554.yaml'
 'ZINC000444256497.yaml'
 'ZINC000629994563.yaml'
 'ZINC000275794416.yaml'
 'ZINC000414865159.yaml'
 'ZINC000293752557.yaml'
 'ZINC000513023623.yaml'
 'ZINC000331563561.yaml'
 'ZINC000569270050.yaml'
 'ZINC000278933042.yaml'
 'ZINC000602586979.yaml'
 'ZINC000360021487.yaml'
 'ZINC000280696398.yaml'
 'ZINC000593213951.yaml'
 'ZINC000375310940.yaml'
 'ZINC000421039533.yaml'
 'ZINC000329730178.yaml'
 'ZINC000329302218.yaml'
 'ZINC000076693592.yaml'
 'ZINC000535008050.yaml'
 'ZINC000527829489.yaml'
 'ZINC000068920681.yaml'
 'ZINC000346659834.yaml'
 'ZINC000619015225.yaml'
 'ZINC000601077976.yaml'
 'ZINC000644617010.yaml'
 'ZINC000163793821.yaml'
 'ZINC000159509070.yaml'
 'ZINC000640028109.yaml'
 'ZINC000513544959.yaml'
 'ZINC000379812577.yaml'
 'ZINC000329926945.yaml'
 'ZINC000421783101.yaml'
 'ZINC000651403808.yaml'
 'ZINC000290372608.yaml'
 'ZINC000500766833.yaml'
 'ZINC000180191350.yaml'
 'ZINC000131555915.yaml'
 'ZINC000135539613.yaml'
 'ZINC000640050710.yaml'
 'ZINC000293543779.yaml'
 'ZINC000127859549.yaml'
 'ZINC000570378223.yaml'
 'ZINC000375831418.yaml'
 'ZINC000624591648.yaml'
 'ZINC000363565214.yaml'
 'ZINC000374410673.yaml'
 'ZINC000514779500.yaml'
 'ZINC000650720303.yaml'
 'ZINC000155613934.yaml'
 'ZINC000277379419.yaml'
 'ZINC000474810522.yaml'
 'ZINC000247398558.yaml'
 'ZINC000182328656.yaml'
 'ZINC000089457144.yaml')

# Build the tasks array
tasks=()
for JOB_NAME in "${job_names[@]}"; do
  tasks+=("boltz rescore /lustre/fs6/lyu_lab/scratch/ichen/data/boltz_runs/d4_rescore_cofold_config/${JOB_NAME} --out_dir /lustre/fs6/lyu_lab/scratch/ichen/data/boltz_runs/d4_rescore_cofold_processed/$(basename $JOB_NAME .yaml) --use_msa_server")
done

printf "%s\n" "${tasks[@]}" | parallel -j $SLURM_CPUS_PER_TASK

#!/bin/bash
#SBATCH --job-name=0_s2_rescore_cofold
#SBATCH --time=02:00:00
#SBATCH --partition=hpc_l40s
#SBATCH --nodes=1
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=8
#SBATCH --gres=gpu:4
#SBATCH --mem-per-gpu=40G
#SBATCH --output=s2_%A.out

export CUDA_VISIBLE_DEVICES=0,1,2,3
export PATH=/ru-auth/local/home/ichen/miniconda3/bin:$PATH
source activate boltz_rescore

job_names=('ZINC000520440291.yaml'
 'ZINC000539406733.yaml'
 'ZINC000625246444.yaml'
 'ZINC001048683995.yaml'
 'ZINC000287374567.yaml'
 'ZINC001028614115.yaml'
 'ZINC001077034834.yaml'
 'ZINC000453336584.yaml'
 'ZINC000897616680.yaml'
 'ZINC000937267298.yaml'
 'ZINC000586751050.yaml'
 'ZINC000932000298.yaml'
 'ZINC000450551910.yaml'
 'ZINC000518759550.yaml'
 'ZINC000669616349.yaml'
 'ZINC000343016571.yaml'
 'ZINC000375486080.yaml'
 'ZINC000907721339.yaml'
 'ZINC000454705882.yaml'
 'ZINC000438905691.yaml'
 'ZINC000861751799.yaml'
 'ZINC000661577595.yaml'
 'ZINC000942457739.yaml'
 'ZINC000378210510.yaml'
 'ZINC000448446275.yaml'
 'ZINC001073859800.yaml'
 'ZINC000683045155.yaml'
 'ZINC000172648663.yaml'
 'ZINC000853031922.yaml'
 'ZINC001261948364.yaml'
 'ZINC000559413424.yaml'
 'ZINC000571080072.yaml'
 'ZINC001003018745.yaml'
 'ZINC000130668661.yaml'
 'ZINC000419445843.yaml'
 'ZINC001043817104.yaml'
 'ZINC000965338365.yaml'
 'ZINC000419873354.yaml'
 'ZINC000170742095.yaml'
 'ZINC000726467110.yaml'
 'ZINC000451319844.yaml'
 'ZINC001018665695.yaml'
 'ZINC000679555790.yaml'
 'ZINC001199969207.yaml'
 'ZINC000995014137.yaml'
 'ZINC001072835483.yaml'
 'ZINC000442921898.yaml'
 'ZINC000297448741.yaml'
 'ZINC001377717241.yaml'
 'ZINC000366544782.yaml'
 'ZINC000409447221.yaml'
 'ZINC000971070823.yaml'
 'ZINC001061620290.yaml'
 'ZINC001579778746.yaml'
 'ZINC001041828396.yaml'
 'ZINC001051553588.yaml'
 'ZINC001460371878.yaml'
 'ZINC000265281429.yaml'
 'ZINC001328800283.yaml'
 'ZINC001193095852.yaml'
 'ZINC000508475661.yaml'
 'ZINC001052175095.yaml'
 'ZINC000093013680.yaml'
 'ZINC000500192494.yaml'
 'ZINC000480785335.yaml'
 'ZINC000453351921.yaml'
 'ZINC000929842198.yaml'
 'ZINC000247147334.yaml'
 'ZINC000684407814.yaml'
 'ZINC000265181994.yaml'
 'ZINC000136880129.yaml'
 'ZINC000955144887.yaml'
 'ZINC000188412270.yaml'
 'ZINC000529649527.yaml'
 'ZINC001341791776.yaml'
 'ZINC000176995469.yaml'
 'ZINC001195393353.yaml'
 'ZINC000433044150.yaml'
 'ZINC000921927365.yaml'
 'ZINC000362611503.yaml'
 'ZINC001021041334.yaml'
 'ZINC000676461131.yaml'
 'ZINC000886836194.yaml'
 'ZINC000849049798.yaml'
 'ZINC000159130997.yaml'
 'ZINC000981787500.yaml'
 'ZINC000960887654.yaml'
 'ZINC001261177261.yaml'
 'ZINC001020327691.yaml'
 'ZINC000285662957.yaml'
 'ZINC000501775665.yaml'
 'ZINC001039123057.yaml'
 'ZINC000872109019.yaml'
 'ZINC001109958062.yaml'
 'ZINC001087646081.yaml'
 'ZINC000369205980.yaml'
 'ZINC000153451054.yaml'
 'ZINC000407281203.yaml'
 'ZINC001474404955.yaml'
 'ZINC000656499190.yaml'
 'ZINC000186482223.yaml'
 'ZINC000334024070.yaml'
 'ZINC001149399826.yaml'
 'ZINC001051633080.yaml'
 'ZINC001095312060.yaml'
 'ZINC000911907143.yaml'
 'ZINC001580410121.yaml'
 'ZINC000129576345.yaml'
 'ZINC000279187431.yaml'
 'ZINC001237901728.yaml'
 'ZINC000996610565.yaml'
 'ZINC001170548029.yaml'
 'ZINC001307701283.yaml'
 'ZINC000182372239.yaml'
 'ZINC001419404744.yaml'
 'ZINC000276781830.yaml'
 'ZINC000611661177.yaml'
 'ZINC001002178741.yaml'
 'ZINC001125309519.yaml'
 'ZINC000191344346.yaml'
 'ZINC000894427229.yaml'
 'ZINC001369886058.yaml'
 'ZINC000246894550.yaml'
 'ZINC000924470947.yaml'
 'ZINC000468894194.yaml'
 'ZINC000659267272.yaml'
 'ZINC000941634458.yaml'
 'ZINC000819225653.yaml'
 'ZINC000925887162.yaml'
 'ZINC000417806012.yaml'
 'ZINC001035320653.yaml'
 'ZINC000846106280.yaml'
 'ZINC000805335094.yaml'
 'ZINC001043696212.yaml'
 'ZINC001202928172.yaml'
 'ZINC000483826940.yaml'
 'ZINC000961583379.yaml'
 'ZINC000595790972.yaml'
 'ZINC000738383044.yaml'
 'ZINC001074556982.yaml'
 'ZINC001073886256.yaml'
 'ZINC000504552433.yaml'
 'ZINC000806327364.yaml'
 'ZINC000295103757.yaml'
 'ZINC001105862991.yaml'
 'ZINC000657922756.yaml'
 'ZINC000176805277.yaml'
 'ZINC000435004139.yaml'
 'ZINC000825615260.yaml'
 'ZINC000374368469.yaml'
 'ZINC000866213504.yaml'
 'ZINC000533478938.yaml'
 'ZINC000972168981.yaml'
 'ZINC000774469834.yaml'
 'ZINC000429522320.yaml'
 'ZINC001004070100.yaml'
 'ZINC000517634594.yaml'
 'ZINC001168222793.yaml'
 'ZINC000192810020.yaml'
 'ZINC000178638284.yaml'
 'ZINC000894101819.yaml'
 'ZINC000662345330.yaml'
 'ZINC000662800454.yaml'
 'ZINC000777733869.yaml'
 'ZINC000439311985.yaml'
 'ZINC001308961074.yaml'
 'ZINC000481989921.yaml'
 'ZINC000894429059.yaml'
 'ZINC000678272880.yaml'
 'ZINC001040612984.yaml'
 'ZINC000813849560.yaml'
 'ZINC001046685471.yaml'
 'ZINC001115282185.yaml'
 'ZINC001067478391.yaml'
 'ZINC000956566890.yaml'
 'ZINC000516964180.yaml'
 'ZINC000430847713.yaml'
 'ZINC000286616311.yaml'
 'ZINC000188287346.yaml'
 'ZINC000115566238.yaml'
 'ZINC000656508398.yaml'
 'ZINC000668631550.yaml'
 'ZINC000124982852.yaml'
 'ZINC000839577413.yaml'
 'ZINC000080247921.yaml'
 'ZINC000426526480.yaml'
 'ZINC000296612417.yaml'
 'ZINC000155998528.yaml'
 'ZINC000287581634.yaml'
 'ZINC000289897491.yaml'
 'ZINC000933438523.yaml'
 'ZINC001047126822.yaml'
 'ZINC000412048402.yaml'
 'ZINC000496403719.yaml'
 'ZINC000285725404.yaml'
 'ZINC001001445660.yaml'
 'ZINC001055138151.yaml'
 'ZINC000421699823.yaml'
 'ZINC000635049325.yaml'
 'ZINC000544117725.yaml'
 'ZINC000906421824.yaml'
 'ZINC000617924178.yaml'
 'ZINC000152090354.yaml'
 'ZINC000531059007.yaml'
 'ZINC001015510639.yaml'
 'ZINC000298791523.yaml'
 'ZINC000574285278.yaml'
 'ZINC001019309159.yaml'
 'ZINC000830877226.yaml'
 'ZINC000131303503.yaml'
 'ZINC000182842742.yaml'
 'ZINC000605902355.yaml'
 'ZINC000426471156.yaml'
 'ZINC000472356611.yaml'
 'ZINC000576277949.yaml'
 'ZINC000970553575.yaml'
 'ZINC000948091407.yaml'
 'ZINC001058532763.yaml'
 'ZINC000961091031.yaml'
 'ZINC001376084945.yaml'
 'ZINC000556484619.yaml'
 'ZINC000863492725.yaml'
 'ZINC000452107481.yaml'
 'ZINC000997292482.yaml'
 'ZINC000673584800.yaml'
 'ZINC000878084395.yaml'
 'ZINC000345970626.yaml'
 'ZINC000875242850.yaml'
 'ZINC001515357045.yaml'
 'ZINC001040614201.yaml'
 'ZINC000271284821.yaml'
 'ZINC000398583627.yaml'
 'ZINC000950078544.yaml'
 'ZINC000261552362.yaml'
 'ZINC000574654702.yaml'
 'ZINC001055479120.yaml'
 'ZINC000775588849.yaml'
 'ZINC001362573982.yaml'
 'ZINC000345525893.yaml'
 'ZINC000348635286.yaml'
 'ZINC000932649435.yaml'
 'ZINC000557493019.yaml'
 'ZINC000228149300.yaml'
 'ZINC000575186982.yaml'
 'ZINC000131571127.yaml'
 'ZINC000998978244.yaml'
 'ZINC000272631760.yaml'
 'ZINC000555574173.yaml'
 'ZINC001032169623.yaml'
 'ZINC000532978237.yaml'
 'ZINC000332414923.yaml'
 'ZINC001196519317.yaml'
 'ZINC000621202771.yaml')

# Build the tasks array
tasks=()
for JOB_NAME in "${job_names[@]}"; do
  tasks+=("boltz rescore /lustre/fs6/lyu_lab/scratch/ichen/data/boltz_runs/s2_rescore_cofold_config/${JOB_NAME} --out_dir /lustre/fs6/lyu_lab/scratch/ichen/data/boltz_runs/s2_rescore_cofold_processed/$(basename $JOB_NAME .yaml) --use_msa_server")
done

printf "%s\n" "${tasks[@]}" | parallel -j $SLURM_CPUS_PER_TASK

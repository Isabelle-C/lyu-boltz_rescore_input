#!/bin/bash
#SBATCH --job-name=1_s2_rescore_cofold
#SBATCH --time=02:00:00
#SBATCH --partition=hpc_l40s
#SBATCH --nodes=1
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=8
#SBATCH --gres=gpu:4
#SBATCH --mem-per-gpu=40G
#SBATCH --output=s2_%A.out

export CUDA_VISIBLE_DEVICES=0,1,2,3
export PATH=/ru-auth/local/home/ichen/miniconda3/bin:$PATH
source activate boltz_rescore

job_names=('ZINC000766031584.yaml'
 'ZINC001363211634.yaml'
 'ZINC000247001079.yaml'
 'ZINC000247015101.yaml'
 'ZINC000073649189.yaml'
 'ZINC000076836015.yaml'
 'ZINC001033739722.yaml'
 'ZINC000194878845.yaml'
 'ZINC000495656270.yaml'
 'ZINC001023604137.yaml'
 'ZINC001025444165.yaml'
 'ZINC000672564445.yaml'
 'ZINC000237909071.yaml'
 'ZINC000574318236.yaml'
 'ZINC001078073018.yaml'
 'ZINC000847525041.yaml'
 'ZINC000550829396.yaml'
 'ZINC000897504395.yaml'
 'ZINC000529344158.yaml'
 'ZINC000135482356.yaml'
 'ZINC001000730978.yaml'
 'ZINC000192043753.yaml'
 'ZINC001655120594.yaml'
 'ZINC000991393621.yaml'
 'ZINC000588863575.yaml'
 'ZINC000248917461.yaml'
 'ZINC000262856881.yaml'
 'ZINC000681377109.yaml'
 'ZINC000358051108.yaml'
 'ZINC001399642198.yaml'
 'ZINC001365986475.yaml'
 'ZINC000133991118.yaml'
 'ZINC000408001865.yaml'
 'ZINC001088099598.yaml'
 'ZINC001109713565.yaml'
 'ZINC000762555244.yaml'
 'ZINC000584028046.yaml'
 'ZINC000623468108.yaml'
 'ZINC001042722400.yaml'
 'ZINC000361132106.yaml'
 'ZINC000743860012.yaml'
 'ZINC000655168559.yaml'
 'ZINC000564110976.yaml'
 'ZINC000531495018.yaml'
 'ZINC000804054066.yaml'
 'ZINC001046261579.yaml'
 'ZINC001460312963.yaml'
 'ZINC000843092160.yaml'
 'ZINC000182663590.yaml'
 'ZINC000263644082.yaml'
 'ZINC000893277758.yaml'
 'ZINC000339640280.yaml'
 'ZINC001391502525.yaml'
 'ZINC000518003593.yaml'
 'ZINC000631236280.yaml'
 'ZINC000286782676.yaml'
 'ZINC000438095302.yaml'
 'ZINC000369129048.yaml'
 'ZINC001043772717.yaml'
 'ZINC000556573026.yaml'
 'ZINC001206651458.yaml'
 'ZINC000684607185.yaml'
 'ZINC000430988927.yaml'
 'ZINC000792998860.yaml'
 'ZINC000465804078.yaml'
 'ZINC001041605786.yaml'
 'ZINC000685844120.yaml'
 'ZINC000934332177.yaml'
 'ZINC000283462313.yaml'
 'ZINC000336580930.yaml'
 'ZINC001046939982.yaml'
 'ZINC000656714762.yaml'
 'ZINC000133744458.yaml'
 'ZINC000352856249.yaml'
 'ZINC000507809396.yaml'
 'ZINC000376738332.yaml'
 'ZINC000245453841.yaml'
 'ZINC000353995714.yaml'
 'ZINC000358253868.yaml'
 'ZINC000155112667.yaml'
 'ZINC000802379169.yaml'
 'ZINC001169307444.yaml'
 'ZINC001403624658.yaml'
 'ZINC001381212829.yaml'
 'ZINC000064804934.yaml'
 'ZINC000621267824.yaml'
 'ZINC000938242679.yaml'
 'ZINC000536865847.yaml'
 'ZINC000286502332.yaml'
 'ZINC000421710394.yaml'
 'ZINC001054647418.yaml'
 'ZINC000567338231.yaml'
 'ZINC001196417557.yaml'
 'ZINC000595353335.yaml'
 'ZINC000989806749.yaml'
 'ZINC001002391793.yaml'
 'ZINC001065434920.yaml'
 'ZINC001071984909.yaml'
 'ZINC000805503179.yaml'
 'ZINC000513818302.yaml'
 'ZINC000436303801.yaml'
 'ZINC000301801549.yaml'
 'ZINC000452100574.yaml'
 'ZINC000418924570.yaml'
 'ZINC000769519341.yaml'
 'ZINC000452023252.yaml'
 'ZINC000603324806.yaml'
 'ZINC001046914841.yaml'
 'ZINC001350153389.yaml'
 'ZINC001074702922.yaml'
 'ZINC000450573233.yaml'
 'ZINC000592403811.yaml'
 'ZINC000272592294.yaml'
 'ZINC000543048256.yaml'
 'ZINC000349353698.yaml'
 'ZINC001420054689.yaml'
 'ZINC001058732454.yaml'
 'ZINC000584233558.yaml'
 'ZINC000473272986.yaml'
 'ZINC000358071102.yaml'
 'ZINC000981250423.yaml'
 'ZINC000526962900.yaml'
 'ZINC000422349618.yaml'
 'ZINC000446751851.yaml'
 'ZINC001119173847.yaml'
 'ZINC000595632104.yaml'
 'ZINC000582751592.yaml'
 'ZINC000556797005.yaml'
 'ZINC000270395954.yaml'
 'ZINC000301468116.yaml'
 'ZINC001033973784.yaml'
 'ZINC000683721842.yaml'
 'ZINC000464767692.yaml'
 'ZINC000667676804.yaml'
 'ZINC000444807044.yaml'
 'ZINC000416493836.yaml'
 'ZINC001021109191.yaml'
 'ZINC000512182007.yaml'
 'ZINC000662335416.yaml'
 'ZINC000421701270.yaml'
 'ZINC000679371269.yaml'
 'ZINC000850493342.yaml'
 'ZINC000627254962.yaml'
 'ZINC000649929688.yaml'
 'ZINC000533411740.yaml'
 'ZINC001320149247.yaml'
 'ZINC000664479370.yaml'
 'ZINC000153400973.yaml'
 'ZINC001096194954.yaml'
 'ZINC000968717635.yaml'
 'ZINC000415549177.yaml'
 'ZINC001416718427.yaml'
 'ZINC001418905447.yaml'
 'ZINC000296435291.yaml'
 'ZINC000748395040.yaml'
 'ZINC000170908795.yaml'
 'ZINC001156463732.yaml'
 'ZINC001437918206.yaml'
 'ZINC000892713700.yaml'
 'ZINC000941361883.yaml'
 'ZINC000528002641.yaml'
 'ZINC000347007006.yaml'
 'ZINC001099969021.yaml'
 'ZINC000982403760.yaml'
 'ZINC000341348768.yaml'
 'ZINC000659691253.yaml'
 'ZINC000389015736.yaml'
 'ZINC000158577469.yaml'
 'ZINC000577603040.yaml'
 'ZINC000249076038.yaml'
 'ZINC000248559983.yaml'
 'ZINC000524392254.yaml'
 'ZINC000370933962.yaml'
 'ZINC001016825715.yaml'
 'ZINC001063398490.yaml'
 'ZINC000973057271.yaml'
 'ZINC000453607577.yaml'
 'ZINC000858362097.yaml'
 'ZINC000466933503.yaml'
 'ZINC000120571916.yaml'
 'ZINC000995125582.yaml'
 'ZINC001041431730.yaml'
 'ZINC000423867812.yaml'
 'ZINC000407973885.yaml'
 'ZINC000895657866.yaml'
 'ZINC000421710406.yaml'
 'ZINC000367601434.yaml'
 'ZINC000973375109.yaml'
 'ZINC000363920872.yaml'
 'ZINC000262658947.yaml'
 'ZINC001119470858.yaml'
 'ZINC000658086473.yaml'
 'ZINC000809405032.yaml'
 'ZINC000609803478.yaml'
 'ZINC001061317651.yaml'
 'ZINC001323717111.yaml'
 'ZINC001003297636.yaml'
 'ZINC000440321606.yaml'
 'ZINC000955102158.yaml'
 'ZINC000618647685.yaml'
 'ZINC000671981913.yaml'
 'ZINC000370893072.yaml'
 'ZINC000045463977.yaml'
 'ZINC000608224751.yaml'
 'ZINC000420063417.yaml'
 'ZINC000624110289.yaml'
 'ZINC000657977970.yaml'
 'ZINC000410783840.yaml'
 'ZINC000801571276.yaml'
 'ZINC000891830660.yaml'
 'ZINC000358062278.yaml'
 'ZINC000645238909.yaml'
 'ZINC000245533477.yaml'
 'ZINC000880249690.yaml'
 'ZINC001028403773.yaml'
 'ZINC001060201073.yaml'
 'ZINC001018723708.yaml'
 'ZINC000340106708.yaml'
 'ZINC000074484650.yaml'
 'ZINC000665143541.yaml'
 'ZINC000936344871.yaml'
 'ZINC000359009035.yaml'
 'ZINC000886762228.yaml'
 'ZINC000525245955.yaml'
 'ZINC000261774189.yaml'
 'ZINC000508455082.yaml'
 'ZINC000287105318.yaml'
 'ZINC000534109220.yaml'
 'ZINC001525937517.yaml'
 'ZINC000413145325.yaml'
 'ZINC001006004942.yaml'
 'ZINC000878406056.yaml'
 'ZINC001363999416.yaml'
 'ZINC001254761628.yaml'
 'ZINC000416873685.yaml'
 'ZINC000348332392.yaml'
 'ZINC000549824186.yaml'
 'ZINC000453142034.yaml'
 'ZINC000550423124.yaml'
 'ZINC000903470913.yaml'
 'ZINC000548355486.yaml'
 'ZINC000646273308.yaml'
 'ZINC000542825037.yaml'
 'ZINC000820594289.yaml'
 'ZINC000269280100.yaml'
 'ZINC000421295130.yaml'
 'ZINC001042098162.yaml'
 'ZINC001413380655.yaml'
 'ZINC001019525589.yaml'
 'ZINC000377772869.yaml'
 'ZINC001326422624.yaml'
 'ZINC000589606863.yaml'
 'ZINC000657934399.yaml')

# Build the tasks array
tasks=()
for JOB_NAME in "${job_names[@]}"; do
  tasks+=("boltz rescore /lustre/fs6/lyu_lab/scratch/ichen/data/boltz_runs/s2_rescore_cofold_config/${JOB_NAME} --out_dir /lustre/fs6/lyu_lab/scratch/ichen/data/boltz_runs/s2_rescore_cofold_processed/$(basename $JOB_NAME .yaml) --use_msa_server")
done

printf "%s\n" "${tasks[@]}" | parallel -j $SLURM_CPUS_PER_TASK

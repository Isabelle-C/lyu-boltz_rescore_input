#!/bin/bash
#SBATCH --job-name=1_d4_rescore_cofold
#SBATCH --time=02:00:00
#SBATCH --partition=hpc_l40s
#SBATCH --nodes=1
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=8
#SBATCH --gres=gpu:4
#SBATCH --mem-per-gpu=40G
#SBATCH --output=d4_%A.out

export CUDA_VISIBLE_DEVICES=0,1,2,3
export PATH=/ru-auth/local/home/ichen/miniconda3/bin:$PATH
source activate boltz_rescore

job_names=('ZINC000102930897.yaml'
 'ZINC000616305793.yaml'
 'ZINC000480496068.yaml'
 'ZINC000090417165.yaml'
 'ZINC000365552749.yaml'
 'ZINC000293687518.yaml'
 'ZINC000567909695.yaml'
 'ZINC000527764590.yaml'
 'ZINC000187809092.yaml'
 'ZINC000115942017.yaml'
 'ZINC000287623857.yaml'
 'ZINC000298731694.yaml'
 'ZINC000364457637.yaml'
 'ZINC000596309140.yaml'
 'ZINC000601145950.yaml'
 'ZINC000112857579.yaml'
 'ZINC000595265041.yaml'
 'ZINC000573216829.yaml'
 'ZINC000632062321.yaml'
 'ZINC000375292554.yaml'
 'ZINC000271207637.yaml'
 'ZINC000119413870.yaml'
 'ZINC000085334606.yaml'
 'ZINC000057771570.yaml'
 'ZINC000451982669.yaml'
 'ZINC000354027637.yaml'
 'ZINC000601953994.yaml'
 'ZINC000659991983.yaml'
 'ZINC000671004566.yaml'
 'ZINC000553796500.yaml'
 'ZINC000178717602.yaml'
 'ZINC000359552375.yaml'
 'ZINC000279550867.yaml'
 'ZINC000428256950.yaml'
 'ZINC000290628915.yaml'
 'ZINC000302699560.yaml'
 'ZINC000340892636.yaml'
 'ZINC000520702665.yaml'
 'ZINC000195441479.yaml'
 'ZINC000539926398.yaml'
 'ZINC000408454402.yaml'
 'ZINC000572302473.yaml'
 'ZINC000128927868.yaml'
 'ZINC000433083202.yaml'
 'ZINC000639320180.yaml'
 'ZINC000421386220.yaml'
 'ZINC000119410297.yaml'
 'ZINC000112717206.yaml'
 'ZINC000450557088.yaml'
 'ZINC000594511648.yaml'
 'ZINC000415558697.yaml'
 'ZINC000346805474.yaml'
 'ZINC000638425397.yaml'
 'ZINC000103161985.yaml'
 'ZINC000647173016.yaml'
 'ZINC000613544672.yaml'
 'ZINC000341188110.yaml'
 'ZINC000358022333.yaml'
 'ZINC000639821604.yaml'
 'ZINC000451246180.yaml'
 'ZINC000540726253.yaml'
 'ZINC000162663443.yaml'
 'ZINC000599506959.yaml'
 'ZINC000644167129.yaml'
 'ZINC000579130977.yaml'
 'ZINC000381888974.yaml'
 'ZINC000419278537.yaml'
 'ZINC000540595123.yaml'
 'ZINC000505420543.yaml'
 'ZINC000413153770.yaml'
 'ZINC000480408888.yaml'
 'ZINC000364862581.yaml'
 'ZINC000583694740.yaml'
 'ZINC000449548054.yaml'
 'ZINC000484629121.yaml'
 'ZINC000330201739.yaml'
 'ZINC000464771011.yaml'
 'ZINC000649689957.yaml'
 'ZINC000617989628.yaml'
 'ZINC000348254305.yaml'
 'ZINC000346667446.yaml'
 'ZINC000268141382.yaml'
 'ZINC000245899191.yaml'
 'ZINC000531646303.yaml'
 'ZINC000416287750.yaml'
 'ZINC000348555593.yaml'
 'ZINC000425369559.yaml'
 'ZINC000356154072.yaml'
 'ZINC000626433159.yaml'
 'ZINC000647880816.yaml'
 'ZINC000651686924.yaml'
 'ZINC000248909028.yaml'
 'ZINC000485951008.yaml'
 'ZINC000664061503.yaml'
 'ZINC000361363076.yaml'
 'ZINC000652609636.yaml'
 'ZINC000596018639.yaml'
 'ZINC000374072306.yaml'
 'ZINC000329010820.yaml'
 'ZINC000330466221.yaml'
 'ZINC000524698687.yaml'
 'ZINC000368226385.yaml'
 'ZINC000653191880.yaml'
 'ZINC000564099295.yaml'
 'ZINC000369112902.yaml'
 'ZINC000651262870.yaml'
 'ZINC000355327118.yaml'
 'ZINC000655445078.yaml'
 'ZINC000599310911.yaml'
 'ZINC000178015194.yaml'
 'ZINC000366649577.yaml'
 'ZINC000265066748.yaml'
 'ZINC000065828678.yaml'
 'ZINC000642686331.yaml'
 'ZINC000507247410.yaml'
 'ZINC000492588861.yaml'
 'ZINC000564471621.yaml'
 'ZINC000453018295.yaml'
 'ZINC000475202287.yaml'
 'ZINC000422901222.yaml'
 'ZINC000329095325.yaml'
 'ZINC000358362485.yaml'
 'ZINC000412694364.yaml'
 'ZINC000656264298.yaml'
 'ZINC000353283206.yaml'
 'ZINC000130532671.yaml'
 'ZINC000362905868.yaml'
 'ZINC000439617604.yaml'
 'ZINC000594648986.yaml'
 'ZINC000493120809.yaml'
 'ZINC000655250990.yaml'
 'ZINC000649878035.yaml'
 'ZINC000630510616.yaml'
 'ZINC000236835221.yaml'
 'ZINC000329536951.yaml'
 'ZINC000355274455.yaml'
 'ZINC000486647484.yaml'
 'ZINC000459339191.yaml'
 'ZINC000413396487.yaml'
 'ZINC000365071023.yaml'
 'ZINC000177973904.yaml'
 'ZINC000521570499.yaml'
 'ZINC000622835444.yaml'
 'ZINC000192454118.yaml'
 'ZINC000459715279.yaml'
 'ZINC000655940516.yaml'
 'ZINC000343998070.yaml'
 'ZINC000253552236.yaml'
 'ZINC000023991615.yaml'
 'ZINC000247477468.yaml'
 'ZINC000305241084.yaml'
 'ZINC000155719879.yaml'
 'ZINC000548147382.yaml'
 'ZINC000191583186.yaml'
 'ZINC000462877234.yaml'
 'ZINC000517755157.yaml'
 'ZINC000365834982.yaml'
 'ZINC000281183080.yaml'
 'ZINC000595834230.yaml'
 'ZINC000355145881.yaml'
 'ZINC000418958962.yaml'
 'ZINC000465129598.yaml'
 'ZINC000370768181.yaml'
 'ZINC000663410642.yaml'
 'ZINC000464372572.yaml'
 'ZINC000053340688.yaml'
 'ZINC000135488461.yaml'
 'ZINC000159533726.yaml'
 'ZINC000433175971.yaml'
 'ZINC000481348051.yaml'
 'ZINC000270959340.yaml'
 'ZINC000493204343.yaml'
 'ZINC000646092836.yaml'
 'ZINC000662808424.yaml'
 'ZINC000271382349.yaml'
 'ZINC000265162697.yaml'
 'ZINC000414969678.yaml'
 'ZINC000429250556.yaml'
 'ZINC000610680867.yaml'
 'ZINC000191074433.yaml'
 'ZINC000423993342.yaml'
 'ZINC000264073851.yaml'
 'ZINC000417307784.yaml'
 'ZINC000414571266.yaml'
 'ZINC000596664063.yaml'
 'ZINC000185593526.yaml'
 'ZINC000459733119.yaml'
 'ZINC000593577820.yaml'
 'ZINC000072898724.yaml'
 'ZINC000362031643.yaml'
 'ZINC000365129771.yaml'
 'ZINC000518341321.yaml'
 'ZINC000362172677.yaml'
 'ZINC000329185772.yaml'
 'ZINC000533232220.yaml'
 'ZINC000185084297.yaml'
 'ZINC000430013018.yaml'
 'ZINC000639558608.yaml'
 'ZINC000328901657.yaml'
 'ZINC000424406638.yaml'
 'ZINC000639348242.yaml'
 'ZINC000437356381.yaml'
 'ZINC000300952679.yaml'
 'ZINC000540834248.yaml'
 'ZINC000273459391.yaml'
 'ZINC000562713783.yaml'
 'ZINC000188511497.yaml'
 'ZINC000661656736.yaml'
 'ZINC000358064563.yaml'
 'ZINC000592181028.yaml'
 'ZINC000584136937.yaml'
 'ZINC000290537631.yaml'
 'ZINC000329485257.yaml'
 'ZINC000657852679.yaml'
 'ZINC000638181743.yaml'
 'ZINC000431486198.yaml'
 'ZINC000335828118.yaml'
 'ZINC000270628406.yaml'
 'ZINC000367447199.yaml'
 'ZINC000466408491.yaml'
 'ZINC000248536951.yaml'
 'ZINC000159177186.yaml'
 'ZINC000278136424.yaml'
 'ZINC000284910391.yaml'
 'ZINC000370525145.yaml'
 'ZINC000373209847.yaml'
 'ZINC000625626121.yaml'
 'ZINC000655736376.yaml'
 'ZINC000451272531.yaml'
 'ZINC000535316507.yaml'
 'ZINC000084373504.yaml'
 'ZINC000270061995.yaml'
 'ZINC000237938360.yaml'
 'ZINC000335302007.yaml'
 'ZINC000617992931.yaml'
 'ZINC000291023493.yaml'
 'ZINC000357551804.yaml'
 'ZINC000593910140.yaml'
 'ZINC000666614106.yaml'
 'ZINC000304720724.yaml'
 'ZINC000457751519.yaml'
 'ZINC000355163361.yaml'
 'ZINC000657225886.yaml'
 'ZINC000281475093.yaml'
 'ZINC000526947641.yaml'
 'ZINC000672709877.yaml'
 'ZINC000353157423.yaml'
 'ZINC000288233772.yaml'
 'ZINC000528659633.yaml'
 'ZINC000623870425.yaml'
 'ZINC000128472643.yaml'
 'ZINC000582419074.yaml'
 'ZINC000570982110.yaml'
 'ZINC000352070883.yaml'
 'ZINC000452390760.yaml'
 'ZINC000560268239.yaml'
 'ZINC000488640994.yaml'
 'ZINC000429271342.yaml'
 'ZINC000641759985.yaml'
 'ZINC000185158323.yaml'
 'ZINC000565883300.yaml'
 'ZINC000280937772.yaml'
 'ZINC000025029722.yaml'
 'ZINC000493064872.yaml'
 'ZINC000301469731.yaml'
 'ZINC000440607995.yaml'
 'ZINC000425345543.yaml'
 'ZINC000363675222.yaml'
 'ZINC000594232893.yaml'
 'ZINC000433256163.yaml'
 'ZINC000497056051.yaml'
 'ZINC000447942180.yaml'
 'ZINC000117348217.yaml'
 'ZINC000497495625.yaml')

# Build the tasks array
tasks=()
for JOB_NAME in "${job_names[@]}"; do
  tasks+=("boltz rescore /lustre/fs6/lyu_lab/scratch/ichen/data/boltz_runs/d4_rescore_cofold_config/${JOB_NAME} --out_dir /lustre/fs6/lyu_lab/scratch/ichen/data/boltz_runs/d4_rescore_cofold_processed/$(basename $JOB_NAME .yaml) --use_msa_server")
done

printf "%s\n" "${tasks[@]}" | parallel -j $SLURM_CPUS_PER_TASK
